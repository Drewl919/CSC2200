<!--Andrew Musielak-->
<!--CSC2200 Fall-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Pappa Paulie's Pizza</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    .navbar-custom {
      background-color: #98bf21;
      height: 120px;
    }
    .nav-link {
      color:blue !important
    }
    table {
      border-collapse: collapse;
    }
    tr {
      border: solid;
      height: 50px;
      border-width: 1px 0;
    }
    img {
      padding: 20px;
    }
    imgOverlay {
      position: absolute;
      margin-left: auto;
      margin-right: auto;
      left: 0;
      right: 0;
      text-align: center;

    }
    .center {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
  <script>
    let dollarUS = Intl.NumberFormat("en-US", {
      style: "currency",
      currency: "USD",
    });
    let zip = false;
    let options = {
      'size':null,
      'onion':false,
      'sausage':false,
      'pepperoni':false,
      'extracheese':false,
      'delivery':zip,
    }
    let costs = {
      'size':0.00,
      'onion':0.00,
      'sausage':0.00,
      'pepperoni':0.00,
      'extracheese':0.00,
      'zipCodePrice':0.00,
      calcTotal : function () {
        return dollarUS.format(this.size + this.onion + this.sausage + this.sausage + this.pepperoni + this.extracheese + this.zipCodePrice);
      },
      calcSize : function (size) {
        for(let i=0; i<pizzaInfo.length; i++) {
          if(pizzaInfo[i].Code == size) {
            this.size = pizzaInfo[i].Cost;
            options.size = pizzaInfo[i].Code;
          }
        }
      }
    }
    let toppingInfo = {
      'Onions':2.99,
      'Peperoni':3.99,
      'Sausage':4.99,
      'ExtraCheese':2.00,
    };
    let zipInfo = [
      {'zip':60600, 'Cost':2.99},
      {'zip':60601, 'Cost':2.99},
      {'zip':60602, 'Cost':2.99},
      {'zip':60603, 'Cost':2.99},
      {'zip':60604, 'Cost':3.99},
      {'zip':60605, 'Cost':3.99},
      {'zip':60606, 'Cost':3.99},
      {'zip':60607, 'Cost':4.99},
      {'zip':60608, 'Cost':5.99},
      {'zip':60609, 'Cost':6.99}
    ];
    let pizzaInfo = [
      {'Size':'Extra Large', 'Code':'EX', 'Cost':16.99},
      {'Size':'Large', 'Code':'LG', 'Cost':14.99},
      {'Size':'Medium', 'Code':'MD', 'Cost':12.99},
      {'Size':'Small', 'Code':'SM', 'Cost':10.99}
    ];
    // Sets the sizes for the size selection area
    function setOptionsForSizes() {
      for( let i=0; i<pizzaInfo.length; i++){
        let opt = document.createElement('option');
        opt.value = pizzaInfo[i].Code;
        opt.innerHTML = pizzaInfo[i].Size;
        uSize.appendChild( opt);
      }
    } // Sets and removes the zip codes according to what the user selects (delivery or pickup)
    function setZipCodes(input) {
      console.log(input);
      if(input) {
        zip = true;
        for (let i = 0; i < zipInfo.length; i++) {
          let opt = document.createElement('option');
          opt.value = zipInfo[i].Cost;
          opt.innerHTML = zipInfo[i].zip;
          uZip.appendChild(opt);
        }
      } else {
        zip = false;
        document.getElementById("uZip").innerHTML = '';
      }
    }
    // Runs when updateCosts() runs, gets the inputs and save it to the object literals
    function getSelectedOptions() {
      costs.calcSize(document.getElementById("uSize").value);
      if(zip) {
        costs.zipCodePrice = parseFloat(document.getElementById("uZip").value);
      }
      let onions = document.getElementById("onionTopping");
      let pepperoni = document.getElementById("pepperoniTopping");
      let sausage = document.getElementById("sausageTopping");
      let cheese = document.getElementById("cheeseTopping");
      if ( onions.checked == true ) {
        costs.onion = toppingInfo.Onions.valueOf();
        options.onion = true;
      }
      if ( pepperoni.checked == true ) {
        costs.pepperoni = toppingInfo.Peperoni.valueOf();
        options.pepperoni = true;
      }
      if ( sausage.checked == true ) {
        costs.sausage = toppingInfo.Sausage.valueOf();
        options.sausage = true;
      }
      if ( cheese.checked == true ) {
        costs.extracheese = toppingInfo.ExtraCheese.valueOf();
        options.extracheese = true;
      }
      // console.log(costs);
    }
    // Updates the cost at the bottom of the page
    function updateCost() {
      getSelectedOptions();
      let dollars = Intl.NumberFormat('en-US');
      let oStr = "<table class='container mt-3'>";
      oStr += "<tr><td>Pizza EX</td><td>"+dollarUS.format(costs.size)+"</td></tr>";
      oStr += "<tr><td>Onions</td><td>"+dollarUS.format(costs.onion)+"</td></tr>";
      oStr += "<tr><td>Pepperoni</td><td>"+dollarUS.format(costs.pepperoni)+"</td></tr>";
      oStr += "<tr><td>Sausage</td><td>"+dollarUS.format(costs.sausage)+"</td></tr>";
      oStr += "<tr><td>Extra Cheese EX</td><td>"+dollarUS.format(costs.extracheese)+"</td></tr>";
      oStr += "<tr><td>Delivery</td><td>"+dollarUS.format(costs.zipCodePrice)+"</td></tr>";
      oStr += `<tr><th>Total</th><th>${costs.calcTotal()}</th></tr></table>`;
      document.getElementById("prices").innerHTML = oStr;
    }
    //Creates the pizza image
    function showPizza() {
      if(options.size!=null) {
        let image = document.getElementById("pizzaImg");
        image.innerHTML = "";
        let size = '0px';
        if(options.size == 'EX') {
          size = '500px';
        } else if(options.size == 'LG') {
          size = '450px';
        } else if(options.size == 'MD') {
          size = '400px';
        } else if(options.size == 'SM') {
          size = '350px';
        }
        let oImg = `<span style="font-size: 40px">Hello ${document.getElementById("uName").value}, here is your pizza:</span><br/><br/>`;
        oImg += `<img src='imgs/pizza.png' class="center" width='${size}'>`;
        if(options.onion){
          oImg += `<img src='imgs/onions.png' class="center imgOverlay" width='${size}'>`;
        }
        if(options.pepperoni){
          oImg += `<img src='imgs/pepperoni.png' class="center imgOverlay" width='${size}'>`;
        }
        if(options.sausage){
          oImg += `<img src='imgs/sausage.png' class="center imgOverlay" width='${size}'>`;
        }
        if(options.extracheese){
          oImg += `<img src='imgs/extracheese.png' class="center imgOverlay" width='${size}'>`;
        }
        image.innerHTML = oImg;
      } else {
        alert("No size selected")
      }
    }
  </script>
</head>
<body onLoad="setOptionsForSizes(); updateCost();">
<nav class="navbar navbar-expand-sm navbar-custom navbar-light">
  <div class="container-fluid">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="#">Active</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    </ul>
  </div>
</nav>

<!--Creates the area for the image of the pizza to be displayed-->
<div class="col-md-6 offset-md-3" data-ride="carousel" style="position: fixed; background-color: grey" onclick="window.location.reload()">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <span id="pizzaImg"> </span>
    </div>
  </div>
</div>

<div class="container mt-3">
  <h2 onClick="_______"> Pappa Paulie's Pizza </h2>
  <form>
    <div class="form-group">
      <label for="uName">Name</label>
      <input type="text" class="form-control" id="uName" aria-describedby="name" placeholder="Enter Name">
      <small id="emailHelp" class="form-text text-muted">Ummmm your name.</small>
    </div>
    <div class="form-group">
      <label for="uSize">Pizza:</label>
      <select name="size" id="uSize" size="3" onchange="updateCost()"/>

      </select>
    </div>
    <div class="form-group">
      <label>Toppings:</label> <br/>
      &emsp;&emsp;<input type="checkbox" name="uToppings" id="onionTopping" value="onions" onclick="updateCost();"/> Onions<br/>
      &emsp;&emsp;<input type="checkbox" name="uToppings" id="pepperoniTopping" value="pepperoni" onclick="updateCost();"/> Pepperoni<br/>
      &emsp;&emsp;<input type="checkbox" name="uToppings" id="sausageTopping" value="sausage" onclick="updateCost();"/> Sausage<br/>
      &emsp;&emsp;<input type="checkbox" name="uToppings" id="cheeseTopping" value="extracheese" onclick="updateCost();"/> Extra Cheese
      </select>
    </div>
    <div class="form-group">
      <label> Delivery Options:</label><br/>
      &emsp;&emsp;<input type="radio" name="uDelivery" id="uRad1" value="pickup" onchange="setZipCodes(false);"/> Pick Up<br/>
      &emsp;&emsp;<input type="radio" name="uDelivery" id="uRad2" value="delivery" onchange="setZipCodes(true);"/> Delivery
    </div>
    <div class="form-group">
      <label for="uSize">Zip:</label>
      <select name="size" id="uZip" size="3" onchange="updateCost();"/>

      </select>
    </div>
    <button type="button" class="btn btn-primary" onClick="showPizza();">Submit</button>
  </form>
  <div id="prices" class="container mt-3">
  </div>
</div>
</body>
</html>
